# ==========================================
# GuardiaVault - Complete Environment Configuration
# ==========================================
# 
# INSTRUCTIONS:
# 1. Copy this file to .env in the root directory
# 2. Replace all placeholder values with your actual values
# 3. Keep .env secret - never commit it to git!
#
# ==========================================

# ==========================================
# CORE REQUIRED SETTINGS
# ==========================================

# OAuth Configuration (Optional - for Google/GitHub login)
# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:5000/api/auth/oauth/google/callback

# GitHub OAuth
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=
GITHUB_REDIRECT_URI=http://localhost:5000/api/auth/oauth/github/callback
# Note: For production, update redirect URIs to your production domain

# Server Configuration
NODE_ENV=development
# Options: development, staging, production

PORT=5000
# Port the server runs on (default: 5000)

HOST=localhost
# Server host (use 0.0.0.0 for Docker, localhost for local)

APP_URL=http://localhost:5000
# Your application URL (for webhooks, email links, etc.)
# For Railway production: https://your-app.up.railway.app

# CORS Configuration
# Comma-separated list of allowed origins for CORS
# Netlify domains are automatically allowed via regex pattern
# Example: ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
ALLOWED_ORIGINS=

# ==========================================
# DATABASE CONFIGURATION (REQUIRED)
# ==========================================

# PostgreSQL Connection String
# Format: postgresql://username:password@host:port/database
# 
# For local PostgreSQL:
# DATABASE_URL=postgresql://postgres:your_password@localhost:5432/guardiavault
#
# For Docker (from docker-compose.yml):
# DATABASE_URL=postgresql://guardiavault:changeme@localhost:5432/guardiavault
#
# For Neon (serverless PostgreSQL):
# DATABASE_URL=postgresql://user:password@ep-xxx.region.aws.neon.tech/dbname?sslmode=require
#
# For other cloud providers, use their connection string format
DATABASE_URL=postgresql://guardiavault:changeme@localhost:5432/guardiavault

# Database Password (for Docker Compose)
DB_PASSWORD=changeme
# Change this to a secure password in production!

# ==========================================
# SECURITY & SESSION (REQUIRED)
# ==========================================

# Session Secret Key
# Generate a random secret: openssl rand -base64 32
# This MUST be a strong random string in production!
SESSION_SECRET=dev-secret-change-in-production-PLEASE-CHANGE-THIS

# Content Security Policy (CSP) Configuration
# CSP_REPORT_ONLY=true
# Set to 'true' to enable report-only mode (violations are logged but not blocked)
# Useful for testing CSP policies before enforcing them
# Default: false (enforcement mode)

# CSP_REPORT_URI=/api/security/csp-report
# Custom endpoint for CSP violation reports
# Default: /api/security/csp-report

# Encryption Key (for SSN hashing and sensitive data)
# Generate: openssl rand -hex 16
SSN_SALT=your_random_salt_for_ssn_hashing_CHANGE_THIS

# Encryption Key (AES-256-GCM)
# Must be 64 hex characters (32 bytes)
# Generate: openssl rand -hex 32
ENCRYPTION_KEY=your_32_byte_hex_key_CHANGE_THIS_ABCDEF1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF1234567890

# Wizard Encryption Key (REQUIRED - for encrypting wizard state)
# Must be exactly 64 hex characters (32 bytes)
# Generate: openssl rand -hex 32
# CRITICAL: No fallback allowed - application will crash if not set
WIZARD_ENCRYPTION_KEY=your_64_character_hex_key_CHANGE_THIS_ABCDEF1234567890ABCDEF1234567890ABCDEF1234567890ABCDEF1234567890

# HMAC secret for notification tokens
# Used for generating secure one-time tokens for guardian invitations
# Generate with: openssl rand -base64 32
NOTIFY_HMAC_SECRET=your-hmac-secret-change-in-production

# ==========================================
# DEMO ACCOUNT (DEVELOPMENT ONLY)
# ==========================================

# Enable demo account (NEVER enable in production!)
# Set to "true" to enable demo account for testing
# CRITICAL: Demo account is automatically disabled in production
DEMO_ACCOUNT_ENABLED=false

# Demo account password
# Only used if DEMO_ACCOUNT_ENABLED=true
# Must be at least 8 characters
# CRITICAL: Never set in production - demo account is disabled automatically
DEMO_PASSWORD=your_demo_password_here

# ==========================================
# FRONTEND / CLIENT CONFIGURATION
# ==========================================

# Smart Contract Address
# Deploy your GuardiaVault contract first, then put the address here
VITE_GUARDIA_VAULT_ADDRESS=0x0000000000000000000000000000000000000000

# Blockchain Network
VITE_CHAIN_ID=31337
# 31337 = Hardhat (local development)
# 11155111 = Sepolia (testnet)
# 1 = Ethereum Mainnet (production)

# Sepolia RPC URL (for testnet)
# Get free RPC: https://infura.io, https://alchemy.com, https://quicknode.com
VITE_SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID

# WalletConnect / Reown Project ID (for wallet connections)
# Get free project ID: https://cloud.reown.com (formerly WalletConnect Cloud)
# This is required for WalletConnect, Coinbase Wallet, and other wallet connections
VITE_WALLETCONNECT_PROJECT_ID=your_walletconnect_project_id_here

# Subscription Escrow contract address
# Update after deploying SubscriptionEscrow.sol
VITE_ESCROW_CONTRACT_ADDRESS=0x0000000000000000000000000000000000000000

# Treasury address (optional - for receiving subscription payments)
VITE_TREASURY_ADDRESS=

# ==========================================
# BLOCKCHAIN / WEB3 CONFIGURATION
# ==========================================

# RPC URL for contract deployment
SEPOLIA_RPC_URL=https://sepolia.infura.io/v3/YOUR_INFURA_PROJECT_ID

# Mainnet RPC URL (for production yield protocols)
MAINNET_RPC_URL=https://eth-mainnet.g.alchemy.com/v2/YOUR_API_KEY

# Private Key for Contract Deployment
# ⚠️ WARNING: Keep this secure! Never commit to git!
# Format: 0x followed by 64 hex characters
# This should be a deployer wallet with test ETH
PRIVATE_KEY=0x0000000000000000000000000000000000000000000000000000000000000000

# Etherscan API Key (for contract verification)
# Get free key: https://etherscan.io/apis
ETHERSCAN_API_KEY=your_etherscan_api_key

# Alchemy API Key (for NFT fetching and multi-chain support)
# Get free key: https://www.alchemy.com/
# Required for fetching NFTs across multiple chains
# Free tier: 300M compute units/month
VITE_ALCHEMY_API_KEY=your_alchemy_api_key_here

# Gas reporting (optional - for contract testing)
# Set to "true" to generate gas reports
REPORT_GAS=false

# ==========================================
# YIELD VAULT CONTRACTS
# ==========================================

# Deployed YieldVault contract address
YIELD_VAULT_ADDRESS=

# Protocol adapter addresses (set after deployment)
LIDO_ADAPTER_ADDRESS=
AAVE_ADAPTER_ADDRESS=

# Treasury address for collecting fees
TREASURY_ADDRESS=

# ==========================================
# DEATH VERIFICATION SYSTEM (Optional)
# ==========================================

# Enable Death Verification
DEATH_VERIFICATION_ENABLED=false
# Set to true to enable SSDI monitoring, obituary search, etc.

# Death Verification Thresholds
DEATH_VERIFICATION_MIN_CONFIDENCE=0.7
# Minimum confidence score (0.0 to 1.0) to verify death

DEATH_VERIFICATION_MIN_SOURCES=2
# Minimum number of independent sources required

# SSDI Configuration
# Get API key from: GenealogyBank, FamilySearch, or Ancestry.com
SSDI_API_KEY=your_genealogybank_api_key
SSDI_API_URL=https://api.genealogybank.com/ssdi
SSDI_BATCH_SIZE=1000

# Obituary Scraping
LEGACY_API_KEY=your_legacy_api_key
LEGACY_API_URL=https://api.legacy.com/v1/obituaries
FINDAGRAVE_API_KEY=your_findagrave_api_key
OBITUARY_ENABLED=true

# Death Certificate Services
VITALCHEK_API_KEY=your_vitalchek_api_key
VITALCHEK_API_URL=https://api.vitalchek.com/v1
VITALCHEK_WEBHOOK_SECRET=your_webhook_secret

# State Vital Records (Optional - only if you have access)
CA_VITAL_RECORDS_API=https://api.cdph.ca.gov/vital-records
CA_VITAL_RECORDS_KEY=your_ca_key
TX_VITAL_RECORDS_API=https://api.dshs.texas.gov/vs
TX_VITAL_RECORDS_KEY=your_tx_key

# ==========================================
# EMAIL SERVICE (SendGrid - Recommended)
# ==========================================

# SendGrid API Key
# Get free account: https://sendgrid.com
# Go to Settings > API Keys > Create API Key
SENDGRID_API_KEY=your_sendgrid_api_key_here

# Sender Email Address
# Must be verified in SendGrid
SENDGRID_FROM_EMAIL=noreply@yourdomain.com

# ==========================================
# EMAIL SERVICE (SMTP Alternative)
# ==========================================

# Alternative to SendGrid - use if you prefer SMTP
# Leave empty if using SendGrid

# SMTP server hostname
SMTP_HOST=

# SMTP server port (587 for TLS, 465 for SSL, 25 for plain)
SMTP_PORT=587

# SMTP username
SMTP_USER=

# SMTP password
SMTP_PASS=

# SMTP sender email address
SMTP_FROM=no-reply@guardiavault.local

# ==========================================
# SMS SERVICE (Twilio - Optional)
# ==========================================

# Twilio Account SID
# Get free account: https://www.twilio.com/try-twilio
TWILIO_ACCOUNT_SID=your_twilio_account_sid

# Twilio Auth Token
# Found in Twilio Console under Account > API Keys
TWILIO_AUTH_TOKEN=your_twilio_auth_token

# Twilio Phone Number
# Format: +1234567890 (with country code)
# Get one from Twilio Console > Phone Numbers > Buy a Number
TWILIO_PHONE_NUMBER=+1234567890

# Alternative: Twilio Messaging Service SID
# Use this instead of TWILIO_PHONE_NUMBER if using Messaging Service
TWILIO_MESSAGING_SERVICE_SID=

# Legacy: Twilio "from" number (use TWILIO_PHONE_NUMBER instead)
TWILIO_FROM=

# ==========================================
# PAYMENT PROCESSING (Stripe - Required for Payments)
# ==========================================

# Stripe Secret Key (Server-side only - NEVER expose to frontend)
# Get from: https://dashboard.stripe.com/apikeys
# Use test keys for development: sk_test_...
# Use live keys for production: sk_live_...
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe Publishable Key (Optional - for future Stripe Elements integration)
# Found in same page as secret key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# Stripe Price IDs for subscription plans
# Get from: Stripe Dashboard > Products > Prices
# These are the price IDs for different subscription tiers
STRIPE_PRICE_SOLO=
STRIPE_PRICE_FAMILY=
STRIPE_PRICE_PRO=

# ==========================================
# TELEGRAM NOTIFICATIONS (Optional)
# ==========================================

# Telegram Bot Token
# Create bot: https://core.telegram.org/bots/tutorial
# Get token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# ==========================================
# ERROR TRACKING (Sentry - Optional)
# ==========================================

# Sentry DSN (Backend)
# Get free account: https://sentry.io
# Create project > Get DSN
SENTRY_DSN=https://your_key@your_org.ingest.sentry.io/your_project_id

# Sentry DSN (Frontend/Client)
# Use a separate Sentry project for frontend error tracking
# Get DSN from your React/JavaScript Sentry project
VITE_SENTRY_DSN=https://your_key@your_org.ingest.sentry.io/your_project_id

# Sentry Environment
SENTRY_ENVIRONMENT=development
VITE_SENTRY_ENVIRONMENT=development

# ==========================================
# FILE STORAGE (AWS S3 - Optional)
# ==========================================

# AWS Access Key ID
AWS_ACCESS_KEY_ID=your_aws_access_key_id

# AWS Secret Access Key
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key

# AWS Region
AWS_REGION=us-east-1
# Options: us-east-1, us-west-2, eu-west-1, etc.

# S3 Bucket Name
AWS_S3_BUCKET=your-bucket-name
S3_BUCKET=guardiavault-uploads

# ==========================================
# LOGGING
# ==========================================

# Log Level
LOG_LEVEL=debug
# Options: error, warn, info, debug
# Use 'debug' in development, 'info' in production

# Enable detailed logging (optional)
# Set to "true" for verbose logs
DEBUG=false

# ==========================================
# KYC / IDENTITY VERIFICATION (Onfido - Optional)
# ==========================================

# Onfido API Token
# Get from: https://onfido.com
ONFIDO_TOKEN=your_onfido_token

# ==========================================
# NOTES
# ==========================================
#
# REQUIRED FOR MINIMAL SETUP:
#   - NODE_ENV
#   - DATABASE_URL
#   - SESSION_SECRET (required in production)
#   - VITE_GUARDIA_VAULT_ADDRESS
#   - VITE_CHAIN_ID
#
# REQUIRED FOR FULL FUNCTIONALITY:
#   - SendGrid API key (email notifications)
#   - Twilio credentials (SMS notifications)
#   - Stripe keys (payment processing)
#
# OPTIONAL:
#   - Telegram bot token (Telegram notifications)
#   - AWS S3 credentials (file storage)
#   - Onfido token (KYC verification)
#   - Yield vault addresses (for yield features)
#   - Death verification API keys (for death monitoring)
#
# PRODUCTION CHECKLIST:
#   ✅ NODE_ENV=production
#   ✅ Strong SESSION_SECRET (use: openssl rand -base64 32)
#   ✅ Strong NOTIFY_HMAC_SECRET
#   ✅ Strong SSN_SALT and ENCRYPTION_KEY
#   ✅ Production database URL
#   ✅ Real SendGrid API key
#   ✅ Real Twilio credentials
#   ✅ Production Stripe keys (sk_live_...)
#   ✅ Verified email domains in SendGrid
#   ✅ Production contract addresses
#   ✅ Yield vault contract addresses (if using yield features)
#   ✅ HTTPS/SSL configured
#   ✅ Environment variables secured (not in code)
#   ✅ All placeholder values replaced with actual values
